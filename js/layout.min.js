const formLayout={components:[{label:"Tabs",components:[{label:"Er",key:"er",components:[]},{label:"Dy",key:"dy",components:[]},{label:"Eu",key:"eu",components:[]},{label:"Gd",key:"gd",components:[]},{label:"Ho",key:"ho",components:[]},{label:"Nd",key:"nd",components:[]},{label:"Pm",key:"pm",components:[]},{label:"Pr",key:"pr",components:[]},{label:"Sm",key:"sm",components:[]},{label:"Tb",key:"tb",components:[]},{label:"Tm",key:"tm",components:[]},],customClass:"tabs-re-selector",key:"tabs",type:"tabs",input:!1,tableView:!1},{label:"reEditField",customClass:"re-edit-field",hideLabel:!0,key:"reEditField",type:"well",input:!1,tableView:!1,components:[{label:"ColumnsTop",columns:[{components:[{label:"Sample name",labelPosition:"left-left",tableView:!0,defaultValue:"",key:"sampleName",type:"textfield",input:!0},],width:6,offset:0,push:0,pull:0,size:"md",currentWidth:6},{components:[{label:"Input values",optionsLabelPosition:"right",tooltip:"Choose whether to use Integrated cross section, F<sub>exp</sub>, S<sub>exp</sub>, or calculated JO parameters as input",inline:!0,tableView:!1,defaultValue:"ICS",values:[{label:"Integrated cross section",value:"ICS",shortcut:""},{label:"F<sub>exp</sub>",value:"FEXP",shortcut:""},{label:"S<sub>exp</sub>",value:"SEXP",shortcut:""},{label:"JO parameters",value:"JO",shortcut:""},],key:"radioInputType",type:"radio",input:!0},{label:"Refractive index values",optionsLabelPosition:"right",tooltip:"Choose whether to use Sellmeier calculation for refractive indeces, or directly supplied value",inline:!0,tableView:!1,defaultValue:"direct",conditional:{show:!1,when:"radioInputType",eq:"JO"},values:[{label:"Direct",value:"direct",shortcut:""},{label:"Sellmeier",value:"sellmeier",shortcut:""},],key:"radioIndexCalc",type:"radio",input:!0},],width:6,offset:0,push:0,pull:0,size:"md",currentWidth:6},],key:"ColumnsTop",type:"columns",input:!1,tableView:!1},{label:"HTMLtop",attrs:[{attr:"",value:""},],refreshOnChange:!1,key:"htmltop",type:"htmlelement",input:!1,tableView:!1},{label:"Sellmeier parameters",hidden:!0,key:"sellmeierParameters",conditional:{show:!0,when:"radioIndexCalc",eq:"sellmeier"},type:"well",input:!1,tableView:!1,components:[{label:"Table",cellAlignment:"left",key:"table",type:"table",numRows:1,numCols:5,input:!1,tableView:!1,rows:[[{components:[{label:"A",tooltip:"Sellmeier equation constants in the following format: <img width='200' src='img/4.png'></img><br> In case of issues with calculation using the Sellmeier equation, see <a href='https://www.loms.cz/FAQ/'>FAQ</a> for more information.",labelPosition:"left-left",spellcheck:!1,tableView:!0,clearOnHide:!1,key:"const_sellmeier",type:"textfield",labelWidth:25,applyMaskOn:"change",input:!0},]},{components:[{label:"B₁",labelPosition:"left-left",spellcheck:!1,tableView:!0,clearOnHide:!1,key:"a_sellmeier",type:"textfield",labelWidth:25,applyMaskOn:"change",input:!0},]},{components:[{label:"C₁ (μm⁻\xb2)",labelPosition:"left-left",spellcheck:!1,tableView:!0,clearOnHide:!1,key:"b_sellmeier",type:"textfield",labelWidth:25,applyMaskOn:"change",input:!0},]},{components:[{label:"B₂",labelPosition:"left-left",spellcheck:!1,tableView:!0,clearOnHide:!1,key:"c_sellmeier",type:"textfield",labelWidth:25,applyMaskOn:"change",input:!0},]},{components:[{label:"C₂ (μm⁻\xb2)",labelPosition:"left-left",spellcheck:!1,tableView:!0,clearOnHide:!1,key:"d_sellmeier",type:"textfield",labelWidth:25,applyMaskOn:"change",input:!0},]},],]},]},{label:"Transition values",tooltip:"Choose observed transition peaks and their corresponding values",disableAddingRemovingRows:!0,reorder:!1,layoutFixed:!1,enableRowGroups:!1,initEmpty:!1,customClass:"transitionDataGrid",hideLabel:!0,tableView:!1,defaultValue:[{include:!1,excitedStateRow:{},u2:"",u4:"",u6:"",integratedCrossSectionCm2:"",meanPeakWavelengthNm:"",refractiveIndex:"",fExp:"",sExp:"",fCalc:"",sCalc:"",textField:"",fexp:"",fcalc:""},],customDefaultValue:"value = elementTransitionArrayTemplate;",key:"dataGrid",type:"datagrid",input:!0,components:[{label:"Include",tooltip:"Check if you want to include the transition in the calculation",customClass:"checkboxInclude",hideLabel:!0,dataGridLabel:!1,tableView:!1,defaultValue:!1,key:"include",type:"checkbox",labelWidth:0,labelMargin:0,input:!0,logic:[{name:"firstRowHide",trigger:{type:"javascript",javascript:"result = (instance.rowIndex==0 || data.radioInputType == 'JO') ? true : false;"},actions:[{name:"enableFirstRow",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},{name:"enforceFirstRow",type:"value",value:"value = false;"},]},]},{label:"Excited state",widget:"html5",customClass:"transitionSelectInput",disabled:!0,tableView:!0,dataSrc:"custom",data:{custom:"values = ref_REDB;"},dataType:"object",idPath:"",template:"{{ item.excitedStateFormatted }}",calculateValue:"value = ref_REDB[instance.rowIndex];",key:"excitedStateRow",type:"select",input:!0},{label:"U2",spellcheck:!1,tableView:!0,redrawOn:"radio",clearOnHide:!1,calculateValue:"value = row.excitedStateRow.u2.toString();",allowCalculateOverride:!0,key:"u2",type:"textfield",applyMaskOn:"change",input:!0,logic:[{name:"firstRowHide",trigger:{type:"javascript",javascript:"result = (instance.rowIndex==0 || data.radioInputType == 'JO') ? true : false;"},actions:[{name:"enableFirstRow",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},]},{label:"U4",tableView:!0,clearOnHide:!1,logic:[{name:"firstRowHide",trigger:{type:"javascript",javascript:"result = (instance.rowIndex==0 || data.radioInputType == 'JO') ? true : false;"},actions:[{name:"enableFirstRow",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},],calculateValue:"value = row.excitedStateRow.u4.toString();",allowCalculateOverride:!0,key:"u4",type:"textfield",applyMaskOn:"change",input:!0},{label:"U6",tableView:!0,clearOnHide:!1,logic:[{name:"firstRowHide",trigger:{type:"javascript",javascript:"result = (instance.rowIndex==0 || data.radioInputType == 'JO') ? true : false;"},actions:[{name:"enableFirstRow",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},],calculateValue:"value = row.excitedStateRow.u6.toString();",allowCalculateOverride:!0,key:"u6",type:"textfield",applyMaskOn:"change",input:!0},{label:"Integrated cross section (cm\xb2 nm)",tooltip:"Input values in decimal (1.0) or scientific notation (1.0e20)",tableView:!0,key:"integratedCrossSectionCm2",type:"textfield",applyMaskOn:"change",calculateValue:'value = data.radioInputType!="FEXP" ? row.integratedCrossSectionCm2 : (row.fexp/((2*constM*constC)/(constA*constH*((row.meanPeakWavelengthNm/10000000)*(row.meanPeakWavelengthNm/10000000))))).toFixed(1);',input:!0,allowCalculateOverride:!0,logic:[{name:"enableFexp",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"FEXP"}},actions:[{name:"enableFexpA",type:"property",property:{label:"Disabled",value:"disabled",type:"boolean"},state:!0},{name:"enableFexpB",type:"property",property:{label:"allowCalculateOverride",value:"allowCalculateOverride",type:"boolean"},state:!1},]},{name:"firstRowHide",trigger:{type:"javascript",javascript:"result = (instance.rowIndex==0 || data.radioInputType == 'JO') ? true : false;"},actions:[{name:"enableFirstRow",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},{name:"hideOnSexp",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"SEXP"}},actions:[{name:"enableFexpA",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},{name:"hideOnJO",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"JO"}},actions:[{name:"enableFexpA",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},]},{label:"Mean peak wavelength (nm)",tableView:!0,calculateValue:"value = row.excitedStateRow.wavelength.toFixed(1);",allowCalculateOverride:!0,key:"meanPeakWavelengthNm",type:"textfield",logic:[{name:"firstRowHide",trigger:{type:"javascript",javascript:"result = (instance.rowIndex==0 || data.radioInputType == 'JO') ? true : false;"},actions:[{name:"enableFirstRow",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},{name:"hideOnSexp",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"SEXP"}},actions:[{name:"enableFexpA",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},{name:"hideOnJO",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"JO"}},actions:[{name:"enableFexpA",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},],applyMaskOn:"change",input:!0},{label:"Refractive index",spellcheck:!1,tableView:!0,key:"refractiveIndex",allowCalculateOverride:!0,calculateValue:"value = data.radioIndexCalc==\"sellmeier\" ? Math.sqrt(data.const_sellmeier+((data.a_sellmeier*(row.meanPeakWavelengthNm/1000)*(row.meanPeakWavelengthNm/1000)))/(((row.meanPeakWavelengthNm/1000)*(row.meanPeakWavelengthNm/1000))-data.b_sellmeier)+(data.c_sellmeier*(row.meanPeakWavelengthNm/1000)*(row.meanPeakWavelengthNm/1000))/(((row.meanPeakWavelengthNm/1000)*(row.meanPeakWavelengthNm/1000))-data.d_sellmeier)).toPrecision(5) : '';",logic:[{name:"firstRowHide",trigger:{type:"javascript",javascript:"result = (instance.rowIndex==0 || data.radioInputType == 'JO') ? true : false;"},actions:[{name:"enableFirstRow",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},{name:"valueRIcalc",trigger:{type:"simple",simple:{show:!0,when:"radioIndexCalc",eq:"sellmeier"}},actions:[{name:"enableCalcIndex",type:"property",property:{label:"allowCalculateOverride",value:"allowCalculateOverride",type:"boolean"},state:!1},{name:"disableRI",type:"property",property:{label:"Disabled",value:"disabled",type:"boolean"},state:!0},]},{name:"hideOnSexp",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"SEXP"}},actions:[{name:"enableFexpA",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},{name:"hideOnJO",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"JO"}},actions:[{name:"enableFexpA",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},],type:"textfield",applyMaskOn:"change",input:!0},{label:"f_exp",calculateValue:'value = data.radioInputType=="FEXP" ? row.fexp : ((2*constM*constC)/(constA*constH*((row.meanPeakWavelengthNm/10000000)*(row.meanPeakWavelengthNm/10000000))))*(row.integratedCrossSectionCm2/10000000);',key:"fExp",type:"hidden",input:!0,tableView:!1},{label:"s_exp",calculateValue:'value = data.radioInputType=="SEXP" ? row.sexp_disp : (row.fExp*3*constH*(row.meanPeakWavelengthNm/10000000)*(2*row.excitedStateRow.gState+1)*9*(row.refractiveIndex*row.refractiveIndex))/(8*(constPi*constPi)*constM*constC*row.refractiveIndex*(((row.refractiveIndex*row.refractiveIndex)+2)*((row.refractiveIndex*row.refractiveIndex)+2)));',key:"sExp",type:"hidden",input:!0,tableView:!1},{label:"f_calc",calculateValue:"value = (8*(constPi*constPi)*constM*constC*(((row.refractiveIndex*row.refractiveIndex)+2)*((row.refractiveIndex*row.refractiveIndex)+2))*(row.u2*mtxCacheOutput[0]+row.u4*mtxCacheOutput[1]+row.u6*mtxCacheOutput[2]))/(3*constH*(row.meanPeakWavelengthNm/10000000)*(2*row.excitedStateRow.gState+1)*9*row.refractiveIndex);",key:"fCalc",type:"hidden",input:!0,tableView:!1},{label:"F<sub>exp</sub>",disabled:!0,tableView:!0,calculateValue:"value = row.fExp.toPrecision(4);",key:"fexp",type:"textfield",input:!0,logic:[{name:"firstRowHide",trigger:{type:"javascript",javascript:"result = (instance.rowIndex==0 || data.radioInputType == 'JO') ? true : false;"},actions:[{name:"enableFirstRow",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},{name:"enableFexp",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"FEXP"}},actions:[{name:"enableFexpA",type:"property",property:{label:"Disabled",value:"disabled",type:"boolean"},state:!1},{name:"enableFexpB",type:"property",property:{label:"allowCalculateOverride",value:"allowCalculateOverride",type:"boolean"},state:!0},]},{name:"hideOnSexp",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"SEXP"}},actions:[{name:"enableFexpA",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},{name:"hideOnJO",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"JO"}},actions:[{name:"enableFexpA",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},]},{label:"F<sub>calc</sub>",disabled:!0,tableView:!0,calculateValue:"value = row.fCalc.toPrecision(4);",key:"fcalc",type:"hidden",input:!0},{label:"S<sub>exp</sub> (cm\xb2)",disabled:!0,tableView:!0,calculateValue:"value = data.radioInputType == 'SEXP'? row.sexp_disp.toPrecision(4) : row.sExp.toPrecision(4);",key:"sexp_disp",type:"textfield",input:!0,logic:[{name:"firstRowHide",trigger:{type:"javascript",javascript:"result = (instance.rowIndex==0 || data.radioInputType == 'JO') ? true : false;"},actions:[{name:"enableFirstRow",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},{name:"enableSexp",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"SEXP"}},actions:[{name:"enableSexpA",type:"property",property:{label:"Disabled",value:"disabled",type:"boolean"},state:!1},{name:"enableFexpB",type:"property",property:{label:"allowCalculateOverride",value:"allowCalculateOverride",type:"boolean"},state:!0},]},]},{label:"s_calc",calculateValue:"value = row.u2*mtxCacheOutput[0]+row.u4*mtxCacheOutput[1]+row.u6*mtxCacheOutput[2];",key:"sCalc",type:"hidden",input:!0,tableView:!1},{label:"S<sub>calc</sub> (cm\xb2)",disabled:!0,tableView:!0,calculateValue:"value = row.sCalc.toPrecision(4);",key:"sCalc_disp",type:"textfield",input:!0,logic:[{name:"firstRowHide",trigger:{type:"javascript",javascript:"result = (instance.rowIndex==0 || data.radioInputType == 'JO') ? true : false;"},actions:[{name:"enableFirstRow",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},]},{label:"Barycenter (cm⁻\xb9)",tableView:!0,clearOnHide:!1,calculateValue:"value = row.excitedStateRow.barycenter.toString();",allowCalculateOverride:!0,key:"barycenter",type:"textfield",applyMaskOn:"change",input:!0},]},{label:"Show more...",action:"custom",showValidations:!1,theme:"secondary",tableView:!1,key:"showMore",type:"button",custom:'document.getElementById("formio").classList.remove("showless"); let gridElement = document.getElementsByClassName("formio-component-dataGrid"); gridElement[0].classList.remove("transitionDataGrid"); let elements = document.getElementsByName("data[showMore]"); elements[0].style.display = "none"; ',input:!0},{title:"Data import",collapsible:!0,conditional:{show:!1,when:"radioInputType",eq:"JO"},key:"dataImportPanel",type:"panel",label:"Panel",collapsed:!0,input:!1,tableView:!1,components:[{label:"Table",cellAlignment:"left",key:"table",type:"table",numRows:2,numCols:3,input:!1,tableView:!1,rows:[[{components:[{label:"Import file",tag:"input",attrs:[{attr:"type",value:"file"},{attr:"id",value:"fileimport"},],refreshOnChange:!1,key:"importFile",type:"htmlelement",input:!1,tableView:!1},]},{components:[{label:"Example data",action:"event",showValidations:!1,theme:"secondary",rightIcon:"fa fa-download",tableView:!1,key:"downloadTemplateDataButton2",type:"button",event:"downloadReferenceData",input:!0,logic:[{name:"exampleNotAvailable",trigger:{type:"javascript",javascript:"result =!filenamesReference.hasOwnProperty(re_edit);"},actions:[{name:"disable",type:"property",property:{label:"Disabled",value:"disabled",type:"boolean"},state:!0},]},]},{label:"HTMLspan",tag:"span",attrs:[{attr:"id",value:"spanTooltipCustom"},],refreshOnChange:!1,key:"htmlspan1",content:"<i data-tooltip='In case of download problems or for detailed information about example data files, see <a href=\"https://www.loms.cz/modules/judd-ofelt-analysis/\">documentation</a>.' class='fa fa-question-circle text-muted' ref='tooltip' aria-expanded='false'></i>",type:"htmlelement",input:!1,tableView:!1},]},{components:[{label:"Data template",action:"event",showValidations:!1,theme:"secondary",rightIcon:"fa fa-download",tableView:!1,key:"downloadTemplateDataButton",type:"button",event:"downloadTemplateData",input:!0},{label:"HTMLspan",tag:"span",attrs:[{attr:"id",value:"spanTooltipCustom"},],refreshOnChange:!1,key:"htmlspan2",content:"<i data-tooltip='In case of download problems or for detailed information about input template files, see <a href=\"https://www.loms.cz/modules/judd-ofelt-analysis/\">documentation</a>.' class='fa fa-question-circle text-muted' ref='tooltip' aria-expanded='false'></i>",type:"htmlelement",input:!1,tableView:!1},]},],[{components:[{label:"Import file",action:"custom",showValidations:!1,theme:"secondary",tableView:!1,key:"importbutton",type:"button",custom:'document.getElementById("overlayloading").style.display = "block"; let file = document.querySelector("#fileimport").files[0]; readFile(file); ',input:!0},]},{components:[]},],]},{label:"File report",tag:"pre",attrs:[{attr:"id",value:"filereport"},{attr:"style",value:"display:none;"},],refreshOnChange:!1,key:"filereport",type:"htmlelement",input:!1,tableView:!1},]},{label:"Columns",columns:[{components:[{label:"Calculate JO parameters",action:"event",conditional:{show:!1,when:"radioInputType",eq:"JO"},showValidations:!1,rightIcon:"fa fa-calculator",tableView:!1,block:!0,key:"calculateJoParameters",logic:[{name:"grey",trigger:{type:"simple",simple:{show:!0,when:"jo2",eq:"NaN"}},actions:[{name:"disableCalc",type:"property",property:{label:"Disabled",value:"disabled",type:"boolean"},state:!0},]},],type:"button",event:"calculateJOparams",input:!0},],width:2,offset:0,push:0,pull:0,size:"sm",currentWidth:0},{components:[{label:"Combinatorial JO analysis",action:"event",showValidations:!1,rightIcon:"fa fa-calculator",tableView:!1,block:!0,key:"calculateCombinationsButton",logic:[{name:"loginHide",trigger:{type:"javascript",javascript:"result = data.radioInputType=='JO' ? true : !userLoggedIn;"},actions:[{name:"loginHideAct",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},{name:"grey",trigger:{type:"simple",simple:{show:!0,when:"jo2",eq:"NaN"}},actions:[{name:"disableCalc",type:"property",property:{label:"Disabled",value:"disabled",type:"boolean"},state:!0},]},],type:"button",event:"calculateCombinations",input:!0},{label:"Combinatorial optimization",action:"event",showValidations:!1,rightIcon:"fa fa-lock",theme:"danger",disabled:!0,tableView:!1,block:!0,key:"calculateCombinationsButtonBlock",attributes:{title:"Log in to access this feature"},logic:[{name:"loginHide",trigger:{type:"javascript",javascript:"result = data.radioInputType=='JO' ? true : userLoggedIn;"},actions:[{name:"loginHideAct",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},],type:"button",input:!0},],width:2,offset:0,push:0,pull:0,size:"sm",currentWidth:3},{components:[{label:"Transition analysis",action:"event",showValidations:!1,rightIcon:"fa fa-calculator",tableView:!1,block:!0,key:"calculateTransitionsButton",logic:[{name:"loginHide",trigger:{type:"javascript",javascript:"result = data.radioInputType=='JO' ? true : !userLoggedIn;"},actions:[{name:"loginHideAct",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},{name:"loginHide",trigger:{type:"javascript",javascript:"result = !userLoggedIn;"},actions:[{name:"loginHideAct",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},{name:"grey",trigger:{type:"simple",simple:{show:!0,when:"jo2",eq:"NaN"}},actions:[{name:"disableCalc",type:"property",property:{label:"Disabled",value:"disabled",type:"boolean"},state:!0},]},],type:"button",event:"calculateTransitions",input:!0},{label:"Transition analysis",action:"event",showValidations:!1,rightIcon:"fa fa-lock",theme:"danger",disabled:!0,tableView:!1,block:!0,key:"calculateTransitionButtonBlock",attributes:{title:"Log in to access this feature"},logic:[{name:"loginHide",trigger:{type:"javascript",javascript:"result = data.radioInputType=='JO' ? true : userLoggedIn;"},actions:[{name:"loginHideAct",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},],type:"button",input:!0},],size:"sm",width:2,offset:0,push:0,pull:0,currentWidth:3},],key:"columnsButtons",type:"columns",input:!1,tableView:!1},{label:"JO parameters",hidden:!0,key:"joParameters1",logic:[{name:"JOshow",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"JO"}},actions:[{name:"showJO",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!1},]},{name:"JOclick",trigger:{type:"event",event:"calculateJOparams"},actions:[{name:"showJO",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!1},]},],type:"well",input:!1,tableView:!1,components:[{label:"Export report",action:"event",showValidations:!1,theme:"secondary",rightIcon:"fa fa-download",tableView:!1,key:"downloadReportJO",type:"button",event:"downloadReportJO",input:!0},{label:"JO parameters",cellAlignment:"left",key:"joParameters",type:"table",numRows:4,input:!1,tableView:!1,rows:[[{components:[{label:"JO2",labelPosition:"left-left",spellcheck:!1,suffix:"cm\xb2",disabled:!0,logic:[{name:"enableJO",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"JO"}},actions:[{name:"enableFexpA",type:"property",property:{label:"Disabled",value:"disabled",type:"boolean"},state:!1},{name:"enableFexpB",type:"property",property:{label:"allowCalculateOverride",value:"allowCalculateOverride",type:"boolean"},state:!0},]},],tableView:!0,clearOnHide:!1,calculateValue:"let iMtx = [[0,0,0],[0,0,0],[0,0,0]]; let sMtx = [0,0,0]; for (let i = 0; i < data.dataGrid.length; i++ ) { if(data.dataGrid[i].include) { iMtx[0][0] += 2*Number(data.dataGrid[i].u2)*Number(data.dataGrid[i].u2); iMtx[0][1] += 2*Number(data.dataGrid[i].u2)*Number(data.dataGrid[i].u4); iMtx[0][2] += 2*Number(data.dataGrid[i].u2)*Number(data.dataGrid[i].u6); iMtx[1][0] += 2*Number(data.dataGrid[i].u4)*Number(data.dataGrid[i].u2); iMtx[1][1] += 2*Number(data.dataGrid[i].u4)*Number(data.dataGrid[i].u4); iMtx[1][2] += 2*Number(data.dataGrid[i].u4)*Number(data.dataGrid[i].u6); iMtx[2][0] += 2*Number(data.dataGrid[i].u6)*Number(data.dataGrid[i].u2); iMtx[2][1] += 2*Number(data.dataGrid[i].u6)*Number(data.dataGrid[i].u4); iMtx[2][2] += 2*Number(data.dataGrid[i].u6)*Number(data.dataGrid[i].u6); sMtx[0] += 2*Number(data.dataGrid[i].u2)*Number(data.dataGrid[i].sExp); sMtx[1] += 2*Number(data.dataGrid[i].u4)*Number(data.dataGrid[i].sExp); sMtx[2] += 2*Number(data.dataGrid[i].u6)*Number(data.dataGrid[i].sExp);} } let outputMtx; try { outputMtx = math.multiply(math.inv(iMtx), sMtx); } catch { outputMtx = [NaN,NaN,NaN]; } mtxCacheOutput = outputMtx; value = mtxCacheOutput[0].toPrecision(3);",key:"jo2",type:"textfield",labelWidth:15,input:!0},]},{components:[{label:"JO4",labelPosition:"left-left",spellcheck:!1,suffix:"cm\xb2",disabled:!0,logic:[{name:"enableJO",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"JO"}},actions:[{name:"enableFexpA",type:"property",property:{label:"Disabled",value:"disabled",type:"boolean"},state:!1},{name:"enableFexpB",type:"property",property:{label:"allowCalculateOverride",value:"allowCalculateOverride",type:"boolean"},state:!0},]},],tableView:!0,clearOnHide:!1,calculateValue:"value = mtxCacheOutput[1].toPrecision(3);",key:"jo4",type:"textfield",labelWidth:15,input:!0},]},{components:[{label:"JO6",labelPosition:"left-left",spellcheck:!1,suffix:"cm\xb2",disabled:!0,logic:[{name:"enableJO",trigger:{type:"simple",simple:{show:!0,when:"radioInputType",eq:"JO"}},actions:[{name:"enableFexpA",type:"property",property:{label:"Disabled",value:"disabled",type:"boolean"},state:!1},{name:"enableFexpB",type:"property",property:{label:"allowCalculateOverride",value:"allowCalculateOverride",type:"boolean"},state:!0},]},],tableView:!0,clearOnHide:!1,calculateValue:"value = mtxCacheOutput[2].toPrecision(3);",key:"jo6",type:"textfield",labelWidth:15,input:!0},]},],[{components:[{label:"JO2/JO4",labelPosition:"left-left",spellcheck:!1,disabled:!0,tableView:!0,clearOnHide:!1,calculateValue:'value = data.radioInputType=="JO" ? data.jo2/data.jo4 : (mtxCacheOutput[0]/mtxCacheOutput[1]).toFixed(2);',key:"jo2jo4",type:"textfield",labelWidth:15,input:!0},]},{components:[{label:"JO2/JO6",labelPosition:"left-left",spellcheck:!1,tableView:!0,clearOnHide:!1,calculateValue:'value = data.radioInputType=="JO" ? data.jo2/data.jo6 : (mtxCacheOutput[0]/mtxCacheOutput[2]).toFixed(2);',key:"jo2jo6",type:"textfield",labelWidth:15,input:!0,disabled:!0},]},{components:[]},],[{components:[{label:"JO4/JO2",labelPosition:"left-left",spellcheck:!1,tableView:!0,clearOnHide:!1,calculateValue:'value = data.radioInputType=="JO" ? data.jo4/data.jo2 : (mtxCacheOutput[1]/mtxCacheOutput[0]).toFixed(2);',key:"jo4jo2",type:"textfield",labelWidth:15,input:!0,disabled:!0},]},{components:[{label:"JO4/JO6",labelPosition:"left-left",spellcheck:!1,tableView:!0,clearOnHide:!1,calculateValue:'value = data.radioInputType=="JO" ? data.jo4/data.jo6 : (mtxCacheOutput[1]/mtxCacheOutput[2]).toFixed(2);',key:"jo4jo6",type:"textfield",labelWidth:15,input:!0,disabled:!0},]},{components:[]},],[{components:[{label:"JO6/JO2",labelPosition:"left-left",spellcheck:!1,tableView:!0,clearOnHide:!1,calculateValue:'value = data.radioInputType=="JO" ? data.jo6/data.jo2 : (mtxCacheOutput[2]/mtxCacheOutput[0]).toFixed(2);',key:"jo6jo2",type:"textfield",labelWidth:15,input:!0,disabled:!0},]},{components:[{label:"JO6/JO4",labelPosition:"left-left",spellcheck:!1,tableView:!0,clearOnHide:!1,calculateValue:'value = data.radioInputType=="JO" ? data.jo6/data.jo4 : (mtxCacheOutput[2]/mtxCacheOutput[1]).toFixed(2);',key:"jo6jo4",type:"textfield",labelWidth:15,input:!0,disabled:!0},]},{components:[]},],]},]},{label:"Transition analysis",action:"event",showValidations:!1,rightIcon:"fa fa-calculator",tableView:!1,block:!0,key:"calculateTransitionsButtonJO",logic:[{name:"loginHide3",trigger:{type:"javascript",javascript:"result = data.radioInputType=='JO' ? !userLoggedIn : true;"},actions:[{name:"loginHideAct3",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},{name:"grey",trigger:{type:"simple",simple:{show:!0,when:"jo2",eq:""}},actions:[{name:"disableCalc",type:"property",property:{label:"Disabled",value:"disabled",type:"boolean"},state:!0},]},],type:"button",event:"calculateTransitions",input:!0},{label:"Transition analysis",action:"event",showValidations:!1,rightIcon:"fa fa-lock",theme:"danger",disabled:!0,tableView:!1,block:!0,key:"calculateTransitionsButtonJOBlock",logic:[{name:"loginHide3",trigger:{type:"javascript",javascript:"result = data.radioInputType=='JO' ? userLoggedIn : true;"},actions:[{name:"loginHideAct3",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!0},]},],attributes:{title:"Log in to access this feature"},type:"button",input:!0},{label:"Combinatorial optimization",hidden:!0,key:"combOptimizationWell",logic:[{name:"COclick",trigger:{type:"event",event:"calculateCombinations"},actions:[{name:"showCO",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!1},]},],type:"well",input:!1,tableView:!1,components:[{label:"HTMLdiv",tag:"div",attrs:[{attr:"id",value:"chart"},],refreshOnChange:!1,key:"htmldiv",type:"htmlelement",input:!1,tableView:!1},{label:"HTMLdiv",tag:"div",attrs:[{attr:"id",value:"chartContainer"},],refreshOnChange:!1,key:"htmldivcontainer",content:'<div class="pagebreak"></div><div class="pagebreak-margin"></div><div id="chart1"></div><div id="chart2"></div><div id="chart3"></div>',type:"htmlelement",input:!1,tableView:!1},{label:"HTMLdivtable",tag:"div",attrs:[{attr:"id",value:"chartTableContainer"},],refreshOnChange:!1,key:"htmldivtablecontainer",content:"<table><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></table>",type:"htmlelement",input:!1,tableView:!1},{label:"HTMLdiv",tag:"div",attrs:[{attr:"id",value:"chartContainer2"},],refreshOnChange:!1,key:"htmldivcontainer",content:'<div id="chart4"></div><div id="chart5"></div><div id="chart6"></div><div class="pagebreak"></div><div class="pagebreak-margin"></div>',type:"htmlelement",input:!1,tableView:!1},{label:"Export report",action:"event",showValidations:!1,theme:"secondary",rightIcon:"fa fa-download",tableView:!1,key:"downloadReportCombinations",type:"button",event:"downloadReportCombinations",input:!0},{title:"Combinations summary",collapsible:!0,key:"combinationsSummary",type:"panel",label:"Combinations summary panel",input:!1,tableView:!1,collapsed:!0,components:[{label:"Statistic report",tag:"div",attrs:[{attr:"id",value:"statsJO"},{attr:"style",value:"display:block;"},],refreshOnChange:!1,key:"statJOreport",type:"htmlelement",input:!1,tableView:!1},]},]},{label:"Transition analysis",hidden:!0,key:"transitionsWell",logic:[{name:"COclick",trigger:{type:"event",event:"calculateTransitions"},actions:[{name:"showTransitions",type:"property",property:{label:"Hidden",value:"hidden",type:"boolean"},state:!1},]},],type:"well",input:!1,tableView:!1,components:[{label:"Export report",action:"event",showValidations:!1,theme:"secondary",rightIcon:"fa fa-download",tableView:!1,key:"downloadReportTransitions",type:"button",event:"downloadReportTransitions",input:!0},{title:"Transitions summary",collapsible:!0,key:"transitionsSummary",type:"panel",label:"Transitions summary panel",input:!1,tableView:!1,collapsed:!0,components:[{label:"Statistic report",tag:"div",attrs:[{attr:"id",value:"statsTranstions"},{attr:"style",value:"display:block;"},],refreshOnChange:!1,key:"statTransitionsReport",type:"htmlelement",input:!1,tableView:!1},]},]},]},]};