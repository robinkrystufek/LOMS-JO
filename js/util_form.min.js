function changeRE(){switch(currentTab){case 0:ref_REDB=elementJson.Er,ref_REDB_transitions=transitionsElementJson.Er;break;case 1:ref_REDB=elementJson.Dy,ref_REDB_transitions=transitionsElementJson.Dy;break;case 2:ref_REDB=elementJson.Eu,ref_REDB_transitions=transitionsElementJson.Eu;break;case 3:ref_REDB=elementJson.Gd,ref_REDB_transitions=transitionsElementJson.Gd;break;case 4:ref_REDB=elementJson.Ho,ref_REDB_transitions=transitionsElementJson.Ho;break;case 5:ref_REDB=elementJson.Nd,ref_REDB_transitions=transitionsElementJson.Nd;break;case 6:ref_REDB=elementJson.Pm,ref_REDB_transitions=transitionsElementJson.Pm;break;case 7:ref_REDB=elementJson.Pr,ref_REDB_transitions=transitionsElementJson.Pr;break;case 8:ref_REDB=elementJson.Sm,ref_REDB_transitions=transitionsElementJson.Sm;break;case 9:ref_REDB=elementJson.Tb,ref_REDB_transitions=transitionsElementJson.Tb;break;case 10:ref_REDB=elementJson.Tm,ref_REDB_transitions=transitionsElementJson.Tm}re_edit=listRE[currentTab],elementTransitionArrayTemplate=[];let e="";for(var t=0;t<ref_REDB.length;t++){let a=ref_REDB_transitions.findIndex(e=>e.groundState==ref_REDB[0].excitedState&&e.excitedState==ref_REDB[t].excitedState),r=0;void 0!=a&&-1!=a&&0!=(r=ref_REDB_transitions[a].l2s)&&(e+=ref_REDB[t].excitedStateFormatted+" "),elementTransitionArrayTemplate.push({excitedStateRow:ref_REDB[t],u2:ref_REDB[t].u2.toPrecision(5),u4:ref_REDB[t].u4.toPrecision(5),u6:ref_REDB[t].u6.toPrecision(5),integratedCrossSectionCm2:"",meanPeakWavelengthNm:ref_REDB[t].wavelength.toPrecision(5),barycenter:ref_REDB[t].barycenter.toPrecision(5),refractiveIndex:"",fExp:"",sExp:"",fCalc:"",sCalc:"",correctionL2S:r}),ref_REDB[t].correctionL2S=r}0!=formRef&&(formRef.getComponent("radioCorrectionMD").component.tooltip="Choose which MD correction type to use. FED is the default correction, for FED+FMD the magnetic correction is implemented for: "+e)}function clearInput(){formRef.data.radioIndexCalc="direct",formRef.data.const_sellmeier="",formRef.data.a_sellmeier="",formRef.data.b_sellmeier="",formRef.data.c_sellmeier="",formRef.data.d_sellmeier=""}function processChange(e){e.changed&&"tabs"===e.changed.component.key&&(document.getElementById("overlayloading").style.display="block",currentTab=e.changed.instance.currentTab,clearInput(),changeRE(),formRef.data.dataGrid=elementTransitionArrayTemplate,formRef.triggerChange(),formRef.triggerRedraw()),e.changed&&"radioInputType"===e.changed.component.key&&"JO"==e.changed.value&&(form.data.radioIndexCalc="sellmeier",formRef.triggerChange(),formRef.triggerRedraw())}function processTabQuery(){let e=new URLSearchParams(window.location.search);null==(re_edit=e.get("RE"))&&(re_edit="Er"),-1===(currentTab=listRE.indexOf(re_edit))&&(currentTab=0),ref_REDB=elementJson[re_edit],ref_REDB_transitions=transitionsElementJson[re_edit],changeRE()}function getOptions(e,t,a,r){let n=t[0].y,o=t.map(e=>e.y),i=Math.max(Math.max(...o)-n,n-Math.min(...o)),c={colors:[r],tooltip:{x:{formatter:function(t){return e[t-1]},show:!0},y:{formatter:function(e){return void 0!==e?(e+n).toPrecision(4):""},show:!0}},yaxis:{min:-(1.1*i),max:1.1*i,tickAmount:4,labels:{formatter:function(e){return a.includes("/")?(e+n).toPrecision(2):(e+n).toPrecision(2)+" cm\xb2"}}},xaxis:{categories:t.map(e=>e.x),tickAmount:0,labels:{formatter:function(e){return""}}},series:[{name:a,data:t.map(e=>e.y-n)},],chart:{animations:{enabled:!0,easing:"easeinout",speed:1,dynamicAnimation:{enabled:!0,speed:350}},height:460,type:"radar",id:"areachart"+a.replace("/","")},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},grid:{padding:{right:30,left:20}},title:{text:a,align:"left"},fill:{fillOpacity:0,opacity:0,colors:"rgba(42, 158, 251, 0)"},markers:{fillOpacity:0,strokeOpacity:0,colors:"rgba(42, 158, 251, 0)",strokeColors:"rgba(42, 158, 251, 0)"}};return c}async function renderGraph(e,t){let a=["#chart1","#chart2","#chart3","#chart4","#chart5","#chart6"],r=[getOptions(t,e.jo2,"JO2","rgb(255, 71, 125)"),getOptions(t,e.jo4,"JO4","rgb(125, 255, 71)"),getOptions(t,e.jo6,"JO6","rgb(71, 125, 255)"),getOptions(t,e.jo2jo4,"JO2/JO4","rgb(155, 71, 175)"),getOptions(t,e.jo2jo6,"JO2/JO6","rgb(175, 155, 71)"),getOptions(t,e.jo4jo6,"JO4/JO6","rgb(71, 175, 155)")];for(let n=0;n<a.length;n++){let o=document.querySelector(a[n]);o&&(o.innerHTML="",window[`chart${n+1}`]=new ApexCharts(o,r[n]),await renderGraphAsync(window[`chart${n+1}`]).then(()=>{updateProgressBar(progressPercent+=10),100==progressPercent&&(document.getElementById("overlayloading").style.display="none",progressPercent=0,hideProgressBar())}))}}function renderGraphAsync(e){return new Promise(t=>setTimeout(()=>{e.render(),t()}))}